---
title: 'ğŸ¨ Jenkins å¸¸è§„é…ç½®&æ’ä»¶ç®¡ç†'
description: 'é…ç½®&æ’ä»¶'
---

![](https://s3api.srebro.cn:443/picgo/202506041356841.png)

# ä¸€ã€Jenkinså¸¸è§„é…ç½®

## 1.1 ç³»ç»Ÿé…ç½®

### 1.1.1 å…¨å±€å®‰å…¨é…ç½®
    ![](https://s3api.srebro.cn:443/picgo/202506041416901.png)
<Steps>
  <Step title="è®¿é—®æ§åˆ¶">
    - CSRF Protectionï¼šé˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»
    ![](https://s3api.srebro.cn:443/picgo/202506041417860.png)
    - ä»£ç†å…¼å®¹æ€§ï¼šé…ç½®Jenkinsé€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®,é€šå¸¸Jenkinsä½¿ç”¨ä¸€ä¸ªTCPç«¯å£å’ŒJNLPèŠ‚ç‚¹ä»£ç†é€šè®¯ã€‚
    ![](https://s3api.srebro.cn:443/picgo/202506041413034.png)
  </Step>
  <Step title="æˆæƒç­–ç•¥">
    é»˜è®¤æ˜¯`ç™»å½•ç”¨æˆ·å¯ä»¥åšä»»ä½•äº‹æƒ…`ï¼›åé¢æœ‰è¯´åˆ°åŸºäºRBACçš„æˆæƒç­–ç•¥ï¼Œè¿™é‡Œå…ˆä¸ä»‹ç»ã€‚
    ![](https://s3api.srebro.cn:443/picgo/202506051409580.png)
  </Step>
  <Step title="å®‰å…¨åŸŸ">
    - ğŸ‘Jenkinsæ•°æ®åº“ï¼šä½¿ç”¨Jenkinså†…ç½®ç”¨æˆ·æ•°æ®åº“
    ![](https://s3api.srebro.cn:443/picgo/202506041426388.png)
    - LDAPï¼šé›†æˆä¼ä¸šLDAPç›®å½•æœåŠ¡(éœ€è¦å®‰è£…æ’ä»¶åæ‰èƒ½ä½¿ç”¨)
  </Step>
</Steps>

### 1.1.2 ç³»ç»Ÿé…ç½®é¡¹
![](https://s3api.srebro.cn:443/picgo/202506041428298.png)

<Steps>
  <Step title="ç³»ç»Ÿæ¶ˆæ¯">
    - æ­¤æ¶ˆæ¯å°†æ˜¾ç¤ºåœ¨ Jenkins ä¸»é¡µçš„é¡¶éƒ¨ã€‚è¿™å¯¹äºå‘ç”¨æˆ·å‘å¸ƒé€šçŸ¥éå¸¸æœ‰ç”¨
   ![](https://s3api.srebro.cn:443/picgo/202506041433221.png)
  </Step>
  <Step title="æ‰§è¡Œè€…æ•°é‡">
    - æ§åˆ¶Jenkinså¯ä»¥åŒæ—¶è¿è¡Œçš„æ„å»ºæ•°é‡,å»ºè®®ï¼šCPUæ ¸å¿ƒæ•° * 2
   ![](https://s3api.srebro.cn:443/picgo/202506041432783.png)
  </Step>
  <Step title="æ ‡ç­¾">
    - æ ‡ç­¾ä¸ºmaster,ä¸”åªå…è®¸è¿è¡Œç»‘å®šåˆ°è¿™å°æœºå™¨çš„Job
   ![](https://s3api.srebro.cn:443/picgo/202506041438648.png)
  </Step>
  <Step title="ç¯å¢ƒå˜é‡">
    - å…¨å±€ç¯å¢ƒå˜é‡è®¾ç½®
   ![](https://s3api.srebro.cn:443/picgo/202506041441960.png)
  </Step>  
  <Step title="é‚®ä»¶é€šçŸ¥">
    -  SMTPæœåŠ¡å™¨é…ç½®ï¼Œå‘ä»¶äººåœ°å€è®¾ç½®ï¼Œé‚®ä»¶æ¨¡æ¿å®šåˆ¶
    <Info>é»˜è®¤çš„é‚®ä»¶å‘é€åŠŸèƒ½ä¸å¤šï¼Œä¸å±•å¼€è¯´æ˜ï¼Œåç»­ç»“åˆé¡¹ç›®å®‰è£…æ’ä»¶æ¼”ç¤º</Info>
   ![](https://s3api.srebro.cn:443/picgo/202506041443782.png)
  </Step>  
</Steps>



## 1.2 å…¨å±€å·¥å…·é…ç½®
 <Info>ä¸ªäººå»ºè®®ä¸è¦åœ¨Jenkinsé¡µé¢ä¸Šé…ç½®å®‰è£…ï¼Œæ‰‹åŠ¨è¿›å…¥åˆ°æœºå™¨ä¸Šå®‰è£…å„ç§å·¥å…·</Info>
![](https://s3api.srebro.cn:443/picgo/202506041522639.png)


#### 1.2.1 å®‰è£…openjdk
<Note>Jenkins éœ€è¦ä½¿ç”¨java17 åŠä»¥ä¸Šï¼Œä½†ä»£ç æ‰“åŒ…ä¾èµ–jdk11ï¼Œæ‰€ä»¥ä¸€å°æœºå™¨ä¼šåŒæ—¶å®‰è£…å¤šä¸ªjdkç¯å¢ƒ</Note>

```bash
#å®‰è£…openjdk-11.0.2
wget https://mirrors.nju.edu.cn/openjdk/11.0.2/openjdk-11.0.2_linux-x64_bin.tar.gz -O /home/application/openjdk-11.0.2_linux-x64_bin.tar.gz
tar -xf /home/application/openjdk-11.0.2_linux-x64_bin.tar.gz -C /home/application/ && rm -f /home/application/openjdk-11.0.2_linux-x64_bin.tar.gz
ls -l /home/application/jdk-11.0.2/
æ€»ç”¨é‡ 28
drwxr-xr-x  2 root root 4096  6æœˆ  4 15:16 bin
drwxr-xr-x  4 root root 4096  6æœˆ  4 15:16 conf
drwxr-xr-x  3 root root 4096  6æœˆ  4 15:16 include
drwxr-xr-x  2 root root 4096  6æœˆ  4 15:16 jmods
drwxr-xr-x 72 root root 4096  6æœˆ  4 15:16 legal
drwxr-xr-x  6 root root 4096  6æœˆ  4 15:16 lib
-rw-r--r--  1  668  668 1214  1æœˆ 18  2019 release

#éªŒè¯java
/home/application/jdk-11.0.2/bin/java --version
openjdk 11.0.2 2019-01-15
OpenJDK Runtime Environment 18.9 (build 11.0.2+9)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.2+9, mixed mode)
```

#### 1.2.2 å®‰è£…git
```bash
yum install git
```

#### 1.2.3 å®‰è£…maven
<Note>mavenæœ¬åœ°ç¼“å­˜ç›®å½•: é»˜è®¤ä¸º `${user.home}/.m2/repository`</Note>
- é…ç½®é˜¿é‡Œäº‘Mavenå…¨å±€ä»£ç†åŠ é€Ÿ

<CodeGroup>

```bash å®‰è£…maven
wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.9.9/binaries/apache-maven-3.9.9-bin.tar.gz
tar -xf apache-maven-3.9.9-bin.tar.gz -C /home/application && rm -rf apache-maven-3.9.9-bin.tar.gz
ls -l /home/application/apache-maven-3.9.9
æ€»ç”¨é‡ 48
drwxr-xr-x 2 root root  4096  6æœˆ  4 15:24 bin
drwxr-xr-x 2 root root  4096  6æœˆ  4 15:24 boot
drwxr-xr-x 3 root root  4096  8æœˆ 14  2024 conf
drwxr-xr-x 4 root root  4096  6æœˆ  4 15:24 lib
-rw-r--r-- 1 root root 18920  8æœˆ 14  2024 LICENSE
-rw-r--r-- 1 root root  5034  8æœˆ 14  2024 NOTICE
-rw-r--r-- 1 root root  1279  8æœˆ 14  2024 README.txt
```

```bash åˆ›å»ºmavené…ç½®æ–‡ä»¶settings.xml
mkdir ~/.m2
touch ~/.m2/settings.xml
```

```xml ç¼–è¾‘settings.xml
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <mirrors>
		<mirror>
			<id>aliyunmaven</id>
			<mirrorOf>*</mirrorOf>
			<name>é˜¿é‡Œäº‘å…¬å…±ä»“åº“</name>
			<url>https://maven.aliyun.com/repository/public</url>
		</mirror>	
    </mirrors>
</settings>
```

```bash é…ç½®mavenç¯å¢ƒå˜é‡
cat >> /etc/profile << 'EOF'

#maven
export M2_HOME=/home/application/apache-maven-3.9.9
export PATH=$M2_HOME/bin:$PATH
EOF

#ä½¿é…ç½®ç”Ÿæ•ˆ
source /etc/profile

#éªŒè¯
mvn -v

Apache Maven 3.9.9 (8e8579a9e76f7d015ee5ec7bfcdc97d260186937)
Maven home: /home/application/apache-maven-3.9.9
Java version: 17.0.2, vendor: Oracle Corporation, runtime: /home/application/jdk-17.0.2
Default locale: zh_CN, platform encoding: UTF-8
OS name: "linux", version: "5.10.0-209.0.0.117.oe2203sp3.x86_64", arch: "amd64", family: "unix"

```


</CodeGroup>

<Warning>å¦‚æœæƒ³ä½¿ç”¨å…¶å®ƒä»£ç†ä»“åº“,å¯åœ¨<repositories></repositories>èŠ‚ç‚¹ä¸­åŠ å…¥å¯¹åº”çš„ä»“åº“ä½¿ç”¨åœ°å€ã€‚ä»¥ä½¿ç”¨springä»£ç†ä»“ä¸ºä¾‹ï¼š</Warning>
```xml
<repository>
    <id>spring</id>
    <url>https://maven.aliyun.com/repository/spring</url>
    <releases>
        <enabled>true</enabled>
    </releases>
    <snapshots>
        <enabled>true</enabled>
    </snapshots>
</repository>
```


#### 1.2.4 å®‰è£…Nvnå·¥å…·å¹¶é…ç½®Node.js,Yarn
<Warning>åœ¨å®‰è£…yarn çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å…ˆåˆ‡æ¢åˆ°Node.jsï¼Œå†å®‰è£…yarn; yarnå’ŒNode.jsç‰ˆæœ¬å…³è”</Warning>

<CodeGroup>
```bash  å®‰è£… nvm
wget https://github.com/nvm-sh/nvm/archive/refs/tags/v0.40.3.tar.gz
tar -xf v0.40.3.tar.gz -C /home/application && rm -rf v0.40.3.tar.gz
ls -l /home/application/nvm-0.40.3
æ€»ç”¨é‡ 288
-rw-rw-r--  1 root root   2299  4æœˆ 24 07:34 bash_completion
-rw-rw-r--  1 root root   7560  4æœˆ 24 07:34 CODE_OF_CONDUCT.md
-rw-rw-r--  1 root root   5817  4æœˆ 24 07:34 CONTRIBUTING.md
-rw-rw-r--  1 root root   3696  4æœˆ 24 07:34 Dockerfile
-rw-rw-r--  1 root root    467  4æœˆ 24 07:34 GOVERNANCE.md
-rwxrwxr-x  1 root root  16631  4æœˆ 24 07:34 install.sh
-rw-rw-r--  1 root root   1113  4æœˆ 24 07:34 LICENSE.md
-rw-rw-r--  1 root root   5440  4æœˆ 24 07:34 Makefile
-rwxrwxr-x  1 root root    371  4æœˆ 24 07:34 nvm-exec
-rwxrwxr-x  1 root root 150227  4æœˆ 24 07:34 nvm.sh
-rw-rw-r--  1 root root   2925  4æœˆ 24 07:34 package.json
-rw-rw-r--  1 root root   2935  4æœˆ 24 07:34 PROJECT_CHARTER.md
-rw-rw-r--  1 root root  50661  4æœˆ 24 07:34 README.md
-rwxrwxr-x  1 root root   1235  4æœˆ 24 07:34 rename_test.sh
-rw-rw-r--  1 root root    882  4æœˆ 24 07:34 ROADMAP.md
drwxrwxr-x 11 root root   4096  4æœˆ 24 07:34 test
-rwxrwxr-x  1 root root   2478  4æœˆ 24 07:34 update_test_mocks.sh
```

```bash é…ç½®å…¨å±€ç¯å¢ƒå˜é‡
cat >> /etc/profile << 'EOF'

#nvm
. /home/application/nvm-0.40.3/nvm.sh
EOF

#ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ
source /etc/profile
```


```bash éªŒè¯nvm
#nvmç‰ˆæœ¬
nvm -v
0.40.3

#nvmç‰ˆæœ¬åˆ—è¡¨
nvm ls-remote

#å®‰è£…node-v18.20.8
nvm install v18.20.8

#å®‰è£…node-v16.17.1
nvm install v16.17.1

#æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰nodeç‰ˆæœ¬
nvm ls
       v18.20.8
->     v16.17.1
       v22.16.0

#åˆ‡æ¢nodeç‰ˆæœ¬
nvm use v18.20.8

#æŸ¥çœ‹nodeç‰ˆæœ¬
node -v
```


```bash è®¾ç½®npmåŠ é€Ÿåœ°å€
npm config set registry https://registry.npmmirror.com

npm config get registry
https://registry.npmmirror.com
```

```bash å®‰è£…yarnå¹¶è®¾ç½®åŠ é€Ÿ
npm install -g yarn

yarn config set registry https://registry.npmmirror.com

yarn -v
1.22.22
```


</CodeGroup>

#### 1.2.5 åœ¨JenkinsæœåŠ¡å™¨ä¸Šæµ‹è¯•æ‰“åŒ…
* å‰ç«¯ä»£ç åº“åœ°å€ï¼šhttps://gitee.com/log4j/pig-ui
* åç«¯ä»£ç åº“åœ°å€ï¼šhttps://gitee.com/log4j/pig  

<CodeGroup> 
```bash VUEå‰ç«¯é¡¹ç›®
#æ‹‰å–ä»£ç 
git clone https://gitee.com/log4j/pig-ui.git
cd pig-ui/

#å®‰è£…ä¾èµ–
npm install

#æ‰“åŒ…
npm run build

#æŸ¥çœ‹æ‰“åŒ…ç»“æœ
ll dist/
æ€»ç”¨é‡ 44
drwxr-xr-x 4 root root 12288  6æœˆ  4 16:20 assets
-rw-r--r-- 1 root root  4286  6æœˆ  4 16:19 favicon.ico
-rw-r--r-- 1 root root 14371  6æœˆ  4 16:20 index.html
-rw-r--r-- 1 root root  5080  6æœˆ  4 16:20 index.html.gz
```


```bash javaåç«¯é¡¹ç›®
#æ‹‰å–ä»£ç 
git clone https://gitee.com/log4j/pig.git
cd pig

#æ‰“åŒ…
mvn clean package -Dmaven.test.skip=true

#æŸ¥çœ‹æ‰“åŒ…ç»“æœ
ls -l pig-*/target
pig-auth/target:
æ€»ç”¨é‡ 103160
drwxr-xr-x 5 root root      4096  6æœˆ  4 17:04 classes
drwxr-xr-x 3 root root      4096  6æœˆ  4 17:04 generated-sources
drwxr-xr-x 2 root root      4096  6æœˆ  4 17:04 maven-archiver
drwxr-xr-x 3 root root      4096  6æœˆ  4 17:04 maven-status
-rw-r--r-- 1 root root 105541653  6æœˆ  4 17:04 pig-auth.jar
-rw-r--r-- 1 root root     70314  6æœˆ  4 17:04 pig-auth.jar.original

pig-gateway/target:
æ€»ç”¨é‡ 69792
drwxr-xr-x 3 root root     4096  6æœˆ  4 17:04 classes
drwxr-xr-x 3 root root     4096  6æœˆ  4 17:04 generated-sources
drwxr-xr-x 2 root root     4096  6æœˆ  4 17:04 maven-archiver
drwxr-xr-x 3 root root     4096  6æœˆ  4 17:04 maven-status
-rw-r--r-- 1 root root 71431910  6æœˆ  4 17:04 pig-gateway.jar
-rw-r--r-- 1 root root    14463  6æœˆ  4 17:04 pig-gateway.jar.original

pig-register/target:
æ€»ç”¨é‡ 196408
drwxr-xr-x 3 root root      4096  6æœˆ  4 17:04 classes
drwxr-xr-x 3 root root      4096  6æœˆ  4 17:04 generated-sources
drwxr-xr-x 2 root root      4096  6æœˆ  4 17:04 maven-archiver
drwxr-xr-x 3 root root      4096  6æœˆ  4 17:04 maven-status
-rw-r--r-- 1 root root 201095558  6æœˆ  4 17:04 pig-register.jar
-rw-r--r-- 1 root root      5796  6æœˆ  4 17:04 pig-register.jar.original

```
</CodeGroup>


## 1.3 å‡­æ®é…ç½®

### 1.3.1 æŸ¥çœ‹å‡­æ®
<Note>ç³»ç»Ÿç®¡ç† â†’ å‡­è¯</Note>
![](https://s3api.srebro.cn:443/picgo/202506051050253.png)

<Note>ç³»ç»Ÿç®¡ç† â†’ å‡­æ® â†’ ç³»ç»Ÿ â†’  å…¨å±€å‡­æ®</Note>
### 1.3.2 æ–°å»ºå‡­æ®
![](https://s3api.srebro.cn:443/picgo/202506051053032.png)

### 1.3.3 å‡­æ®ç±»å‹
![](https://s3api.srebro.cn:443/picgo/202506051048583.png)
- ç”¨æˆ·åå’Œå¯†ç å‡­æ®ï¼šç”¨äºå­˜å‚¨ç”¨æˆ·åå’Œå¯†ç ï¼Œä¾‹å¦‚ Gitã€Subversion æˆ–å…¶ä»–æºä»£ç ç®¡ç†å·¥å…·çš„å‡­æ®ã€‚
- SSH ç”¨æˆ·åå’Œç§é’¥å‡­æ®ï¼šç”¨äºå­˜å‚¨ SSH ç”¨æˆ·åå’Œç§é’¥ï¼Œä¾‹å¦‚ Gitã€Subversion æˆ–å…¶ä»–æºä»£ç ç®¡ç†å·¥å…·çš„å‡­æ®ã€‚
- è¯ä¹¦å‡­æ®ï¼šç”¨äºå­˜å‚¨è¯ä¹¦ï¼Œä¾‹å¦‚ SSL è¯ä¹¦ã€SSH è¯ä¹¦ç­‰ã€‚
- Secret textï¼šç”¨äºå­˜å‚¨æ•æ„Ÿçš„æ–‡æœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚ API å¯†é’¥ã€å¯†ç ç­‰ã€‚
- Docker å‡­æ®ï¼šç”¨äºå­˜å‚¨ Docker Hub æˆ–å…¶ä»– Docker ä»“åº“çš„å‡­æ®ã€‚
- Kubernetes é…ç½®æ–‡ä»¶ï¼šç”¨äºå­˜å‚¨ Kubernetes é›†ç¾¤çš„é…ç½®æ–‡ä»¶ã€‚

## 1.4 ç”¨æˆ·/æˆæƒç®¡ç†

### 1.4.1 ç”¨æˆ·ç®¡ç†
<Note>Jenkinsé»˜è®¤ä½¿ç”¨è‡ªå¸¦çš„æ•°æ®åº“ç®¡ç†ç”¨æˆ·ï¼Œ ä¹Ÿå¯ä»¥é€šè¿‡å®‰è£…æ’ä»¶å®ç°LDAPã€GitLabè®¤è¯é›†æˆã€‚</Note>
![](https://s3api.srebro.cn:443/picgo/202506051336819.png)
<Accordion title="ğŸ¦Jenkinsä½¿ç”¨æ–‡ä»¶å­˜å‚¨ï¼Œåœ¨JENKINS_HOME/usersç›®å½•ä¸­å¯ä»¥çœ‹åˆ°æ¯ä¸ªç”¨æˆ·çš„é…ç½®">
![](https://s3api.srebro.cn:443/picgo/202506051353981.png)
</Accordion>

<Note>ç³»ç»Ÿç®¡ç† â†’ ç”¨æˆ·è®¾ç½®</Note>
![](https://s3api.srebro.cn:443/picgo/202506051338582.png)
> æŸ¥çœ‹åˆ°å½“å‰çš„ç”¨æˆ·åˆ—è¡¨ï¼›å¯ä»¥å¯¹ç”¨æˆ·æ–°å»ºã€æ›´æ–°ã€åˆ é™¤ã€‚

![](https://s3api.srebro.cn:443/picgo/202506051347015.png)
![](https://s3api.srebro.cn:443/picgo/202506051344361.png)


### 1.4.2 åŸºäºRBACæ¨¡å¼çš„æˆæƒç®¡ç†
<Note>éœ€è¦ä½¿ç”¨åˆ°Role-based Authorization Strategyæ’ä»¶</Note>
åœ¨æ—¥å¸¸Jenkins ä½¿ç”¨è¿‡ï¼Œä¸åŒçš„äººå‘˜å²—ä½å¯¹äºJOBæœ‰ä¸åŒçš„æƒé™ï¼Œæ¯”å¦‚å¼€å‘äººå‘˜åªèƒ½çœ‹åˆ°JOBçš„æ„å»ºå†…å®¹,è€Œä¸èƒ½è¿›è¡Œæ„å»ºã€éƒ¨ç½²ç­‰æ“ä½œã€‚
è€ŒQAï¼ŒSREäººå‘˜å°±å¯ä»¥æ“ä½œæ‰€æœ‰çš„JOBï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°RBACï¼Œå³åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€‚


**RBAC æ ¸å¿ƒæ¦‚å¿µ**
- **è§’è‰²ï¼ˆRoleï¼‰**ï¼šå®šä¹‰ä¸€ç»„æƒé™çš„é›†åˆ  
- **ç”¨æˆ·ï¼ˆUserï¼‰**ï¼šç³»ç»Ÿä¸­çš„æ“ä½œä¸»ä½“  
- **ç»‘å®šï¼ˆBindingï¼‰**ï¼šå°†ç”¨æˆ·ä¸è§’è‰²å…³è”  



<Steps>
  <Step title="å®‰è£…æ’ä»¶">
<Note>ç³»ç»Ÿç®¡ç† â†’ ç®¡ç†æ’ä»¶ â†’ å¯ç”¨æ’ä»¶ â†’ è¾“å…¥Role-based Authorization Strategy</Note>
![](https://s3api.srebro.cn:443/picgo/202506051357802.png)
![](https://s3api.srebro.cn:443/picgo/202506051359298.png)
  </Step>
  <Step title="é…ç½®å…¨å±€å®‰å…¨é…ç½®ï¼ŒæŒ‡å®šæˆæƒç­–ç•¥ä¸ºRole-Based Strategy">
  <Note>ç³»ç»Ÿç®¡ç† â†’ ç³»ç»Ÿé…ç½® â†’ å…¨å±€å®‰å…¨é…ç½® â†’ æˆæƒç­–ç•¥</Note>
    ![](https://s3api.srebro.cn:443/picgo/202506051405964.png)
ç„¶åä¿å­˜ä¿®æ”¹ï¼Œ è¿”å›Jenkinsç³»ç»Ÿè®¾ç½®é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°Manage and Assign Rolesè®¾ç½®ã€‚
    ![](https://s3api.srebro.cn:443/picgo/202506051408282.png)
  </Step>
  <Step title="åˆ›å»ºRole">
    - è¿›å…¥Manage and Assign Rolesè®¾ç½®ï¼Œ é€‰æ‹©Manage Rolesï¼š
    ![](https://s3api.srebro.cn:443/picgo/202506051417043.png)
    - åˆ›å»º Gobal Role developer ï¼šå…·æœ‰å…¨å±€Readæƒé™ã€‚
    ![](https://s3api.srebro.cn:443/picgo/202506051447919.png)
    - åˆ›å»º item roles dev2025:  ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å…³è”çš„ä¸€ç»„é¡¹ç›®ï¼ŒåŒ¹é…ä»¥dev2025-å¼€å¤´ä¸”ä»»æ„ç»“å°¾çš„ä½œä¸šï¼Œä»»åŠ¡è¯»å–æƒé™ã€‚
    ![](https://s3api.srebro.cn:443/picgo/202506051448885.png)
  </Step>
  <Step title="åˆ†é…Role">
    - è¿›å…¥Manage and Assign Rolesè®¾ç½®ï¼Œ é€‰æ‹©Assign Rolesï¼š
    ![](https://s3api.srebro.cn:443/picgo/202506051436906.png)
  </Step>
  <Step title="é¢„å…ˆåˆ›å»ºå¥½å¤šä¸ªJOB,è¿›è¡Œæƒé™æµ‹è¯•">
  ![](https://s3api.srebro.cn:443/picgo/202506051440340.png)
  </Step>  
  <Step title="åˆ‡æ¢åˆ°dev01ç”¨æˆ·ä¸‹">
  åªæ˜¾ç¤ºdev2025å¼€å¤´çš„é¡¹ç›®ï¼Œå¹¶ä¸”åªæœ‰åªè¯»çš„æƒé™ã€‚
  ![](https://s3api.srebro.cn:443/picgo/202506051449461.png)
  ![](https://s3api.srebro.cn:443/picgo/202506051450109.png)
  </Step> 
  <Step title="åˆ‡æ¢åˆ°dev02ç”¨æˆ·ä¸‹">
  æœªèµ‹äºˆç”¨æˆ·Global Role  "read" æƒé™ï¼ŒæŠ¥é”™ã€‚
  ![](https://s3api.srebro.cn:443/picgo/202506051505403.png)
  </Step> 
</Steps>




# äºŒã€Jenkinsæ’ä»¶ç®¡ç†
## 2.1 Jenkins æ’ä»¶æ˜¯ä»€ä¹ˆ
Jenkins æ’ä»¶ï¼ˆPluginï¼‰æ˜¯ Jenkins çš„æ ¸å¿ƒæ‰©å±•æœºåˆ¶ï¼Œç”¨äºå¢å¼ºå’Œæ‰©å±• Jenkins çš„åŠŸèƒ½ã€‚æ’ä»¶é›†æˆå·²è¶…è¿‡ **2,383**ä¸ªæ’ä»¶
Jenkins æœ¬èº«æ˜¯ä¸€ä¸ªå¼€æºçš„æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼ˆCI/CDï¼‰å·¥å…·ï¼Œä½†å…¶é»˜è®¤åŠŸèƒ½æœ‰é™ã€‚é€šè¿‡å®‰è£…æ’ä»¶ï¼Œç”¨æˆ·å¯ä»¥ä¸º Jenkins æ·»åŠ æ–°çš„èƒ½åŠ›ï¼Œä½¿å…¶æ”¯æŒæ›´å¤šå·¥å…·ã€é›†æˆæ›´å¤šæœåŠ¡æˆ–ä¼˜åŒ–å·¥ä½œæµç¨‹ã€‚


## 2.2 å®‰è£…æ’ä»¶çš„æ–¹å¼
<Accordion title="ğŸ‹ï¸â€â™€ï¸æ–¹å¼ä¸€ï¼šåœ¨çº¿å®‰è£…ï¼ˆæ¨èğŸ‘ï¼‰">
![](https://s3api.srebro.cn:443/picgo/202506041758243.png)
1. è®¿é—®æ’ä»¶ç®¡ç†ç•Œé¢ï¼š `ç³»ç»Ÿç®¡ç† â†’ ç®¡ç†æ’ä»¶ â†’ å¯ç”¨æ’ä»¶`
2. æœç´¢ç›®æ ‡æ’ä»¶ï¼ˆå¦‚ `Role-Based Strategy`ï¼‰
3. å‹¾é€‰åç‚¹å‡»ã€Œç›´æ¥å®‰è£…ã€æˆ–ã€Œä¸‹è½½å¾…é‡å¯åå®‰è£…ã€
</Accordion>


<Accordion title="ğŸ‹ï¸æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…ï¼ˆç¦»çº¿ï¼‰">
![](https://s3api.srebro.cn:443/picgo/202506041757984.png)
1. ä» [Jenkins æ’ä»¶å®˜ç½‘](https://plugins.jenkins.io/) ä¸‹è½½ `.hpi` æ–‡ä»¶
2. è¿›å…¥ `ç³»ç»Ÿç®¡ç† â†’ ç®¡ç†æ’ä»¶ â†’ é«˜çº§`
3. åœ¨ã€Œä¸Šä¼ æ’ä»¶ã€å¤„é€‰æ‹©æœ¬åœ°æ–‡ä»¶
4. ç‚¹å‡»ã€Œä¸Šä¼ ã€å®Œæˆå®‰è£…ã€
</Accordion>

<Accordion title="ğŸ“Œå…¶ä»–æ–¹å¼ï¼š">
1. Jenkins CLI å‘½ä»¤è¡Œå®‰è£…ï¼ˆéœ€é…ç½® SSH å¯†é’¥ï¼‰
2. è§£å‹æ’ä»¶åŒ…åˆ° `/home/application/jenkins/plugins/` ç›®å½•
</Accordion>


## 2.3 åœ¨çº¿å®‰è£…æ’ä»¶å¤±è´¥ï¼Œè§£å†³æ–¹æ¡ˆ
> å¯èƒ½å› ä¸ºæŸäº›ç½‘ç»œå› ç´ ğŸ˜‘ï¼Œéœ€è¦å’±è‡ªè¡Œé…ç½®åŠ é€Ÿæº

<Steps>
  <Step title="â€‹â€‹å…³é—­å®‰å…¨æ ¡éªŒâ€‹â€‹ï¼ˆä¿®æ”¹ Jenkins å¯åŠ¨å‚æ•°ï¼‰">
```bash
# åœ¨å¯åŠ¨å‘½ä»¤ä¸­æ·»åŠ  JVM å‚æ•°
java -Dhudson.model.DownloadService.noSignatureCheck=true -jar jenkins.war
```
<Note>systemdç®¡ç†çš„Jenkinsä¹Ÿæ˜¯åŒæ ·ä¿®æ”¹æ–¹å¼</Note>
![](https://s3api.srebro.cn:443/picgo/202506041807634.png)

  </Step>

  <Step title="æ›¿æ¢æ›´æ–°ç«™ç‚¹ URLâ€‹â€‹ï¼š">
  ![](https://s3api.srebro.cn:443/picgo/202506041804659.png)
-  è¿›å…¥ ç³»ç»Ÿç®¡ç† â†’ ç³»ç»Ÿè®¾ç½®
-  ä¿®æ”¹ã€Œæ›´æ–°ç«™ç‚¹ã€URL ä¸ºé•œåƒåœ°å€ä¸º`https://jenkins-update.davidz.cn/update-center.json`
-  ä¿å­˜åé‡å¯ Jenkins
  </Step>

</Steps>


## 2.4 å®‰è£…å¸¸ç”¨æ’ä»¶
åœ¨åˆå§‹åŒ–Jenkins çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å·²ç»é¢„è£…äº†ä¸€æ‰¹ç¤¾åŒºæ¨èçš„æ’ä»¶ï¼Œä½†æ˜¯æƒ³è¦çœŸæ­£çš„ç”¨å¥½jenkins è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®‰è£…ä¸€äº›æ’ä»¶ï¼Œå»ä¸°å¯Œæˆ‘ä»¬çš„Jenkins

| åç§°                              | åŠŸèƒ½                                                         | å¤‡æ³¨                                                         |
| --------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| ğŸ‘Role-Based Strategy               | Jenkinsç”¨æˆ·è§†å›¾æƒé™ç®¡ç†æ’ä»¶                                  | https://wiki.jenkins.io/display/JENKINS/Role+Strategy+Plugin |
| ğŸ‘Job Configuration History         | jenkinsé…ç½®å›é€€æ’ä»¶ | https://wiki.jenkins.io/display/JENKINS/JobConfigHistory+Plugin |
| ğŸ‘Email Extension Template          | Jenkinså¤æ‚é‚®ä»¶æ¨é€åŠŸèƒ½ï¼Œå¯è‡ªå®šä¹‰é‚®ä»¶ä¸»é¢˜ï¼Œå†…å®¹ï¼Œå®šä¹‰é‚®ä»¶æ¥æ”¶å¯¹è±¡ | https://plugins.jenkins.io/email-ext/#plugin-content-documentation |
| Publish Over SSH                  | é€šè¿‡åœ¨jenkins æœåŠ¡å™¨ä¸Š ä»¥sshçš„æ–¹å¼å‘è¿œç«¯æœºå™¨æ‰§è¡Œå‘½ä»¤         | https://plugins.jenkins.io/publish-over-ssh                  |
| Generic Webhook Trigger           | åŸºäºGitlabé’©å­æäº¤åˆå¹¶ä»£ç è§¦å‘jenkinsæ„å»º                    | https://plugins.jenkins.io/generic-webhook-trigger           |
| SonarQube Scanner                 | jenkins ä¸Šé›†æˆ sonarqube ä»£ç è´¨é‡æ£€æµ‹åŠŸèƒ½                    | https://plugins.jenkins.io/sonar/#documentation              |
| Blue Ocean                        | åŸºäºweb çš„å¯è§†åŒ–æµæ°´çº¿                                       | https://plugins.jenkins.io/blueocean/                        |
| Build Name and Description Setter | è‡ªå®šä¹‰æ„å»ºçš„åç§°å’Œæè¿° | https://plugins.jenkins.io/build-name-setter/                |
| Console Column                    | æä¾›å¯ç”¨äºè§†å›¾çš„å¿«é€Ÿè·¯å¾„æ§åˆ¶å°é“¾æ¥ï¼Œèƒ½å¤Ÿåœ¨é¡¹ç›®è§†å›¾é¦–é¡µå±•ç¤ºé¡¹ç›®æ„å»ºè¾“å‡ºé¢æ¿çš„åœ°å€ | https://plugins.jenkins.io/console-column-plugin/            |
| figlet-buildstep                  | å…è®¸ä½ åœ¨æ„å»ºè¿‡ç¨‹ä¸­è¾“å‡ºä¸€ä¸ªç®€å•çš„æ¨ªå¹…ï¼Œæ³¨æ„åªæ”¯æŒæ˜¾ç¤ºè‹±æ–‡å•è¯,å•è¯å’Œå•è¯ä¹‹é—´åªå…è®¸ä¸€ä¸ªç©ºæ ¼ | https://plugins.jenkins.io/figlet-buildstep/                 |
| ğŸ‘sidebar-link                      | åœ¨ Jenkins ä¸»é¡µã€è§†å›¾é€‰é¡¹å¡å’Œé¡¹ç›®é¡µé¢çš„ä¾§è¾¹æ ä¸­æ·»åŠ è‡ªå®šä¹‰é“¾æ¥ | https://plugins.jenkins.io/sidebar-link/                     |
| Metrics                           | ç”¨äºæ”¶é›†å’Œå±•ç¤ºJenkinså®ä¾‹çš„æ€§èƒ½æ•°æ®å’ŒæŒ‡æ ‡çš„æ’ä»¶ï¼Œå¯ä»¥æ¥å…¥åˆ°Prometheusä¸­ | https://plugins.jenkins.io/metrics                           |