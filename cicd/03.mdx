---
title: 'ğŸï¸ Jenkinsæ ¸å¿ƒéƒ¨ç½²æµç¨‹'
description: 'éƒ¨ç½²è¯´æ˜'
---

<a href="https://www.jenkins.io/" target="_blank">
  <img height="200" noZoom src="https://s3api.srebro.cn:443/picgo/202506021434811.png" />
</a>

#### **ä¸€ã€Jenkinsæ ¸å¿ƒéƒ¨ç½²æµç¨‹**

##### **Jenkinsæ˜¯ä»€ä¹ˆ**
Jenkins æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–æœåŠ¡å™¨ï¼Œä¸»è¦ç”¨äºæŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰ã€‚ å®ƒç”±Javaç¼–å†™ï¼Œå› æ­¤å®ƒå¯ä»¥åœ¨Windowsã€Linuxå’ŒmacOSç­‰å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚ Jenkins æä¾›äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„webç•Œé¢ï¼Œé€šè¿‡æ’ä»¶æ”¯æŒæ¥æ‰©å±•å…¶åŠŸèƒ½ï¼Œä½¿å¾—å®ƒå¯ä»¥ä¸å„ç§æµè¡Œçš„å¼€å‘å·¥å…·å’ŒæŠ€æœ¯æ— ç¼é›†æˆï¼Œæ¯”å¦‚Gitã€Mavenã€Dockerç­‰ã€‚

##### **ä¸»è¦åŠŸèƒ½**

- æŒç»­é›†æˆï¼ˆCIï¼‰ï¼šJenkins å¯ä»¥ç›‘æ§ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­çš„å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œæ„å»ºã€æµ‹è¯•ï¼Œç¡®ä¿ä»£ç çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚è¿™æœ‰åŠ©äºå¼€å‘å›¢é˜Ÿæ›´å¿«åœ°å‘ç°å’Œè§£å†³é—®é¢˜ã€‚
- æŒç»­éƒ¨ç½²ï¼ˆCDï¼‰ï¼šå½“ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•åï¼ŒJenkins å¯ä»¥è‡ªåŠ¨éƒ¨ç½²åˆ°ä¸€å°æˆ–å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå®ç°ä»ä»£ç æäº¤åˆ°äº§å“äº¤ä»˜çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚
- å·¥ä½œæµå®šåˆ¶å’Œç¼–æ’ï¼šJenkins æ”¯æŒ Pipeline è¯­æ³•ï¼Œå…è®¸ç”¨æˆ·å®šä¹‰å’Œå®ç°å¤æ‚çš„æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ã€‚
- æ’ä»¶æ‰©å±•ï¼šJenkins æ‹¥æœ‰åºå¤§çš„æ’ä»¶ç”Ÿæ€ï¼Œå¯ä»¥é€šè¿‡å®‰è£…æ’ä»¶æ¥æ‰©å±•å…¶åŠŸèƒ½ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·çš„éœ€æ±‚ã€‚
- Master-Slaveæ¶æ„ï¼šJenkins æ”¯æŒ Master-Slave æ¶æ„ï¼ŒMaster è´Ÿè´£è°ƒåº¦æ„å»ºä»»åŠ¡ï¼ŒSlave è´Ÿè´£æ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚è¿™ç§æ¶æ„å…è®¸åˆ†å¸ƒå¼æ„å»ºï¼Œæé«˜äº†èµ„æºåˆ©ç”¨ç‡å’Œæ„å»ºæ•ˆç‡ã€‚

##### **ä½¿ç”¨åœºæ™¯**

- è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šè‡ªåŠ¨æ‰§è¡Œå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰ï¼Œå¿«é€Ÿåé¦ˆæµ‹è¯•ç»“æœã€‚
- ç¼–è¯‘å’Œæ„å»ºï¼šè‡ªåŠ¨åŒ–ç¼–è¯‘å’Œæ„å»ºè¿‡ç¨‹ï¼Œä¿éšœä»£ç çš„å¯æ„å»ºæ€§å’Œä¸€è‡´æ€§ã€‚
- éƒ¨ç½²åº”ç”¨ï¼šè‡ªåŠ¨å°†åº”ç”¨éƒ¨ç½²åˆ°å¼€å‘ã€æµ‹è¯•æˆ–ç”Ÿäº§ç¯å¢ƒï¼ŒåŠ å¿«äº¤ä»˜é€Ÿåº¦ã€‚
- ç¯å¢ƒç®¡ç†ï¼šè‡ªåŠ¨åŒ–ç®¡ç†ï¼ˆå¦‚åˆ›å»ºã€é”€æ¯ï¼‰å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œæé«˜èµ„æºä½¿ç”¨æ•ˆç‡ã€‚
- ä»»åŠ¡è°ƒåº¦ï¼šå®šæ—¶æ‰§è¡Œç‰¹å®šä»»åŠ¡ï¼Œå¦‚æ•°æ®åº“å¤‡ä»½ã€æ¸…ç†æ—¥å¿—ç­‰ã€‚

##### **Jenkinsç‰¹ç‚¹**

- å¼€æºå…è´¹ï¼šJenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼Œå¹¶ä¸”å…è´¹æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚
- å¯æ‰©å±•æ€§ï¼šJenkinsæä¾›äº†ä¸°å¯Œçš„æ’ä»¶å’Œæ‰©å±•ï¼Œå¯ä»¥æ»¡è¶³å„ç§ä¸åŒçš„éœ€æ±‚ã€‚
- æ˜“äºå®‰è£…å’Œéƒ¨ç½²ï¼šJenkinså¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼Œä¾‹å¦‚Windowsã€Linuxã€MacOSç­‰ï¼Œå®‰è£…å’Œéƒ¨ç½²éƒ½éå¸¸ç®€å•ã€‚
- æ”¯æŒå¤šç§ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼šJenkinsæ”¯æŒå¤šç§ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¾‹å¦‚Gitã€SVNã€Mercurialç­‰ã€‚
- æ”¯æŒå¤šç§æ„å»ºå·¥å…·ï¼šJenkinsæ”¯æŒå¤šç§æ„å»ºå·¥å…·ï¼Œä¾‹å¦‚Mavenã€Gradleã€Antç­‰ã€‚
- å¯è§†åŒ–ç•Œé¢ï¼šJenkinsæä¾›äº†å¯è§†åŒ–çš„ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹å’Œç®¡ç†å„ç§ä»»åŠ¡å’Œæ„å»ºã€‚
- è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•ï¼šJenkinså¯ä»¥è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•ä»£ç ï¼Œå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚
- æ”¯æŒåˆ†å¸ƒå¼æ„å»ºï¼šJenkinsæ”¯æŒåˆ†å¸ƒå¼æ„å»ºï¼Œå¯ä»¥å°†ä»»åŠ¡åˆ†é…ç»™å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œå¹¶è¡Œæ„å»ºï¼Œæé«˜æ„å»ºé€Ÿåº¦ã€‚
- æ”¯æŒæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼šJenkinsæ”¯æŒæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼Œå¯ä»¥å°†ä»£ç å¿«é€Ÿåœ°äº¤ä»˜ç»™ç”¨æˆ·ï¼Œæé«˜è½¯ä»¶äº¤ä»˜é€Ÿåº¦ã€‚

#### **äºŒã€Jenkinså‘å±•**

<Steps>
  <Step title="Hudsoné˜¶æ®µï¼š">
    Jenkinsæœ€åˆæ˜¯ä»Hudsoné¡¹ç›®åˆ†æ”¯å‡ºæ¥çš„ã€‚Hudsonæ˜¯ä¸€ä¸ªç”±Sunå…¬å¸å¼€å‘çš„æŒç»­é›†æˆå·¥å…·ï¼ŒJenkinsæœ€åˆæ˜¯ä½œä¸ºHudsonçš„ä¸€ä¸ªåˆ†æ”¯é¡¹ç›®å¼€å§‹çš„ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒJenkinsç¤¾åŒºçš„å¼€å‘è€…ä¸»è¦æ˜¯å¯¹Hudsonè¿›è¡Œæ”¹è¿›å’Œä¼˜åŒ–ï¼Œæ·»åŠ æ–°çš„åŠŸèƒ½å’Œä¿®å¤æ¼æ´ï¼ŒJenkinsé€æ¸æˆä¸ºäº†ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®ã€‚
  </Step>
  <Step title="ç¤¾åŒºåŒ–é˜¶æ®µï¼š">
éšç€Jenkinsçš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åŠ å…¥åˆ°Jenkinsç¤¾åŒºä¸­ï¼Œè´¡çŒ®ä»£ç ã€æä¾›æ”¯æŒå’Œåˆ†äº«ç»éªŒï¼ŒJenkinsé€æ¸æˆä¸ºäº†ä¸€ä¸ªçœŸæ­£çš„å¼€æºé¡¹ç›®ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒJenkinsç¤¾åŒºçš„å¼€å‘è€…å¼€å§‹ç€é‡å…³æ³¨ç”¨æˆ·ä½“éªŒå’Œæ˜“ç”¨æ€§ï¼Œæä¾›æ›´åŠ å‹å¥½çš„ç•Œé¢å’Œæ›´åŠ æ˜“ç”¨çš„åŠŸèƒ½ã€‚
  </Step>
  <Step title="æ’ä»¶åŒ–é˜¶æ®µ: ">
Jenkinsæä¾›äº†ä¸°å¯Œçš„æ’ä»¶å’Œæ‰©å±•ï¼Œå¯ä»¥æ»¡è¶³å„ç§ä¸åŒçš„éœ€æ±‚ï¼Œè¿™ä¹Ÿæ˜¯Jenkinsæœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒJenkinsç¤¾åŒºçš„å¼€å‘è€…å¼€å§‹ç€é‡å…³æ³¨å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼Œæä¾›æ›´åŠ ä¸°å¯Œçš„æ’ä»¶å’Œæ‰©å±•ï¼Œè®©ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è‡ªç”±åœ°é€‰æ‹©å’Œç»„åˆæ’ä»¶ã€‚
  </Step>
  <Step title="Pipelineé˜¶æ®µ:">
Jenkins Pipelineæ˜¯Jenkins 2.0ä¸­æ–°å¢çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–°çš„æ–¹å¼æ¥å®šä¹‰æŒç»­äº¤ä»˜æµç¨‹ï¼Œå¯ä»¥æ›´åŠ çµæ´»åœ°æ„å»ºå¤æ‚çš„æŒç»­äº¤ä»˜æµç¨‹ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒJenkinsç¤¾åŒºçš„å¼€å‘è€…å¼€å§‹ç€é‡å…³æ³¨æŒç»­äº¤ä»˜æµç¨‹çš„å¯è§†åŒ–å’Œè‡ªåŠ¨åŒ–ï¼Œæä¾›æ›´åŠ çµæ´»å’Œå¯å®šåˆ¶çš„æŒç»­äº¤ä»˜æµç¨‹ï¼Œè®©ç”¨æˆ·å¯ä»¥æ›´åŠ è½»æ¾åœ°æ„å»ºå’Œç®¡ç†å¤æ‚çš„æŒç»­äº¤ä»˜æµç¨‹ã€‚
  </Step>
  <Step title="Cloud Nativeé˜¶æ®µ:">
Jenkins Pipelineæ˜¯Jenkins 2.Jenkins Xæ˜¯Jenkinsç¤¾åŒºæ¨å‡ºçš„ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºäº‘åŸç”Ÿåº”ç”¨çš„æŒç»­äº¤ä»˜å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿåœ°æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²äº‘åŸç”Ÿåº”ç”¨ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒJenkinsç¤¾åŒºçš„å¼€å‘è€…å¼€å§‹ç€é‡å…³æ³¨äº‘åŸç”Ÿåº”ç”¨çš„æŒç»­äº¤ä»˜ï¼Œæä¾›æ›´åŠ ä¸“ä¸šå’Œé«˜æ•ˆçš„æŒç»­äº¤ä»˜è§£å†³æ–¹æ¡ˆï¼Œè®©ç”¨æˆ·å¯ä»¥æ›´åŠ è½»æ¾åœ°æ„å»ºå’Œç®¡ç†äº‘åŸç”Ÿåº”ç”¨çš„äº¤ä»˜æµç¨‹ã€‚
  </Step>
</Steps>

#### **ä¸‰ã€Jenkinså®‰è£…**

##### **ä¸‹è½½jenkins**
Jenkinsæä¾›äº†å¤šç§éƒ¨ç½²æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼š

- **å®˜æ–¹ç½‘ç«™ä¸‹è½½**ï¼šè®¿é—® [Jenkinså®˜ç½‘](https://www.jenkins.io/download/) ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
- **ç‰ˆæœ¬é€‰æ‹©**ï¼š
  - LTSç‰ˆæœ¬ï¼šé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œç¨³å®šæ€§å¥½ï¼Œå»ºè®®ç”Ÿäº§ç¯å¢ƒä½¿ç”¨
  - Weeklyç‰ˆæœ¬ï¼šæ¯å‘¨æ›´æ–°ç‰ˆæœ¬ï¼ŒåŒ…å«æœ€æ–°ç‰¹æ€§ï¼Œé€‚åˆå¼€å‘æµ‹è¯•ç¯å¢ƒ
![](https://s3api.srebro.cn:443/picgo/202506031126452.png)



##### **jenkinsæ¨èç¡¬ä»¶é…ç½®**
- **CPUå†…å­˜ï¼š8C16G**
- **å­˜å‚¨ç©ºé—´ï¼š 100G ç³»ç»Ÿç›˜ + 1T æ•°æ®ç›˜**
- **ç³»ç»Ÿï¼š OpenEuler22.03 LTS SP4**

<Tip> æ•°æ®ç›˜æŒ‚è½½åˆ°`/home/application` ç›®å½•ä¸‹</Tip>
<Tip> `JENKINS_HOME`å®šä¹‰åœ¨`/home/application/.jenkins` ç›®å½•ä¸‹ </Tip>


##### **jenkinså‡ ç§éƒ¨ç½²æ–¹å¼**

- **åŸºäºOpenEulerç³»ç»Ÿï¼Œä½¿ç”¨RPMåŒ…éƒ¨ç½²**
  ```bash
  # æ·»åŠ Jenkinsæº
  sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
  sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key

  # å®‰è£…Jenkinsä¾èµ–
  sudo yum install fontconfig java-21-openjdk

  # å®‰è£…Jenkins
  sudo yum install jenkins

  # åˆ›å»ºjenkinså·¥ä½œç›®å½•ï¼Œå¹¶æˆæƒç›®å‰æƒé™
    sudo mkdir -p /home/application/.jenkins
    sudo chown -R jenkins:jenkins /home/application/.jenkins

  # ä¿®æ”¹jenkins é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰JENKINS_HOME
    sudo sed -i \
      -e 's|^Environment="JENKINS_HOME=/var/lib/jenkins"|Environment="JENKINS_HOME=/home/application/.jenkins"|' \
      -e 's|^WorkingDirectory=/var/lib/jenkins|WorkingDirectory=/home/application/.jenkins|' \
      /usr/lib/systemd/system/jenkins.service

  # å¯åŠ¨JenkinsæœåŠ¡
  sudo systemctl daemon-reload
  sudo systemctl enable jenkins
  sudo systemctl start jenkins

  # éªŒè¯æœåŠ¡
  ps -ef | grep jenkins
  jenkins  2712534       1 57 12:22 ?        00:00:31 /usr/bin/java -Djava.awt.headless=true -jar /usr/share/java/jenkins.war --webroot=/var/cache/jenkins/war --httpPort=8080
  root     2712768 2696925  0 12:23 pts/0    00:00:00 grep --color=auto jenkins

  netstat -ntlup | grep 8080
  tcp6       0      0 :::8080                 :::*                    LISTEN      2712534/java  
  ```

- **åŸºäºWARåŒ…éƒ¨ç½²ï¼Œjdkæ–¹å¼**
  ```bash
  # 1. ç¡®ä¿å·²å®‰è£…JDK 11æˆ–æ›´é«˜ç‰ˆæœ¬
  java -version
  
  # 2. ä¸‹è½½Jenkins WARåŒ…
  wget https://get.jenkins.io/war-stable/latest/jenkins.war
  
  # 3. ä¿®æ”¹Jenkinsé…ç½®æ–‡ä»¶ä¸­çš„JENKINS_HOMEè·¯å¾„
  # JENKINS_HOMEæ˜¯Jenkinsçš„å·¥ä½œç›®å½•ï¼ŒåŒ…å«æ‰€æœ‰é…ç½®ã€ä½œä¸šå’Œæ’ä»¶æ•°æ®
  # å°†å…¶ä¿®æ”¹åˆ°/home/application/.jenkinså¯ä»¥æ›´å¥½åœ°ç®¡ç†æƒé™å’Œå¤‡ä»½
  sudo sed -i 's|Environment="JENKINS_HOME=/var/lib/jenkins"|Environment="JENKINS_HOME=/home/application/.jenkins"|g; s|WorkingDirectory=/var/lib/jenkins|WorkingDirectory=/home/application/.jenkins|g' /usr/lib/systemd/system/jenkins.service
  
  # 4. é‡æ–°åŠ è½½systemdé…ç½®
  sudo systemctl daemon-reload
  
  # 5. è¿è¡ŒJenkins
  java -jar jenkins.war --httpPort=8080
```

- **åŸºäºdocker å®¹å™¨éƒ¨ç½²æ–¹å¼**
  ```bash
  # æ‹‰å–Jenkinsé•œåƒ
  docker pull jenkins/jenkins:lts
  
  # è¿è¡ŒJenkinså®¹å™¨
  docker run -d \
    -p 8080:8080 \
    -p 50000:50000 \
    -v jenkins_home:/var/jenkins_home \
    -v /var/run/docker.sock:/var/run/docker.sock \
    --name jenkins \
    jenkins/jenkins:lts
  ```

##### **æ¨èä½¿ç”¨å®¿ä¸»æœºï¼ŒwaråŒ…éƒ¨ç½²æ–¹å¼**

WARåŒ…éƒ¨ç½²æ–¹å¼å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **çµæ´»æ€§é«˜**
   - å¯ä»¥è‡ªç”±é€‰æ‹©JDKç‰ˆæœ¬
   - ä¾¿äºè‡ªå®šä¹‰Jenkinså‚æ•°
   - æ–¹ä¾¿è¿›è¡Œç‰ˆæœ¬å‡çº§å’Œå›æ»š

2. **èµ„æºåˆ©ç”¨æ•ˆç‡**
   - ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºä¸Šï¼Œæ— å®¹å™¨å¼€é”€
   - æ›´å¥½çš„æ€§èƒ½è¡¨ç°
   - æ›´å®¹æ˜“è¿›è¡Œç³»ç»Ÿçº§ä¼˜åŒ–

3. **ç»´æŠ¤ç®€ä¾¿**
   - é…ç½®æ–‡ä»¶ç›´æ¥å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿ
   - æ—¥å¿—ç®¡ç†æ›´ç›´è§‚
   - æ•…éšœæ’æŸ¥æ›´æ–¹ä¾¿

4. **æ³¨æ„äº‹é¡¹**
   - ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…JDK 11æˆ–æ›´é«˜ç‰ˆæœ¬
   - å»ºè®®é…ç½®Jenkinsç³»ç»ŸæœåŠ¡å®ç°å¼€æœºè‡ªå¯
   - å®šæœŸå¤‡ä»½JENKINS_HOMEç›®å½•
   - åˆç†è§„åˆ’ç£ç›˜ç©ºé—´ï¼Œé¢„ç•™è¶³å¤Ÿå®¹é‡
   - æ³¨æ„æ–‡ä»¶ç³»ç»Ÿæƒé™è®¾ç½®